# ‚úÖ CHECKLIST DE AUDITORIA ‚Äì RAG EDUCATE+ (FASES 01‚Äì11)

Este documento deve ser usado para validar que o Replit implementou corretamente todas as fases do RAG segmentado, garantindo seguran√ßa, estabilidade e compatibilidade com o Educare+ App.

---

# üîí 1. SEGURAN√áA E ESTABILIDADE GERAL

## 1.1 Nenhuma rota existente foi modificada ou removida  
- [ ] APIs continuam respondendo normalmente  
- [ ] Fluxos integrados ao n8n continuam funcionando  
- [ ] Webhooks permanecem inalterados  
- [ ] Sem altera√ß√£o no comportamento do app para usu√°rios finais  

## 1.2 Sistema inicia sem erros  
- [ ] Todos os servi√ßos sobem corretamente  
- [ ] N√£o h√° warnings novos relacionados ao RAG  
- [ ] Logs est√£o limpos e consistentes  

## 1.3 Vari√°veis de ambiente preservadas  
- [ ] `.env` atualizado com flags do RAG segmentado  
- [ ] Nenhuma vari√°vel cr√≠tica foi removida  
- [ ] Flags de fallback funcionam corretamente  

---

# üß± 2. ARQUITETURA DO RAG E SEGMENTA√á√ÉO

## 2.1 As KBs segmentadas existem e est√£o operacionais  
- [ ] `kb_baby` est√° populada e retornando dados  
- [ ] `kb_mother` est√° populada e retornando dados  
- [ ] `kb_professional` est√° populada e retornando dados  
- [ ] Estrutura no banco segue o schema definido  

## 2.2 O **KnowledgeBaseSelector** est√° ativo  
- [ ] O m√≥dulo correto seleciona a KB correta  
- [ ] Logs indicam sele√ß√£o coerente por m√≥dulo  

## 2.3 Base legado permanece preservada  
- [ ] A tabela legado existe  
- [ ] N√£o recebe ingest√µes novas  
- [ ] Est√° acess√≠vel para auditoria  
- [ ] Opera√ß√µes de fallback funcionam quando habilitadas  

---

# üì• 3. INGEST√ÉO VIA SUPER ADMIN

## 3.1 Ingest√£o segmentada est√° operacional  
- [ ] Upload ‚Üí pr√©-processamento ‚Üí embeddings ‚Üí armazenamento  
- [ ] Ingest√£o respeita m√≥dulo selecionado  
- [ ] N√£o h√° ingest√£o indevida para legado  

## 3.2 Painel de gest√£o de prompts funcionando  
- [ ] Listar prompts  
- [ ] Editar prompts  
- [ ] Atualizar prompts sem crash  
- [ ] Hist√≥rico de vers√µes preservado  

---

# üîç 4. CONSULTA RAG E RESPOSTAS

## 4.1 Pipeline segmentado funcionando  
- [ ] Busca inicial (vector search) retorna top-k  
- [ ] Re-ranking neural ativo  
- [ ] Auditoria de contexto funcionando  
- [ ] Respostas com `confidenceScore` embutido  

## 4.2 Comportamento com fallback (quando flags = true)  
- [ ] Se KB segmentada n√£o retornar nada, legado entra  
- [ ] Sem regress√£o  
- [ ] Sem respostas vazias  

## 4.3 Comportamento SEM fallback (quando flags = false)  
- [ ] M√≥dulo responde apenas com KB segmentada  
- [ ] Sem crash quando score baixo  
- [ ] Mensagens seguras para baixa confian√ßa  

---

# üß™ 5. TESTES DE REGRESS√ÉO E QUALIDADE

## 5.1 Teste de temas reais  
- [ ] Perguntas sobre beb√™ (sono, marcos, alimenta√ß√£o)  
- [ ] Perguntas sobre m√£e (sa√∫de emocional, p√≥s-parto)  
- [ ] Perguntas profissionais (PEI, adapta√ß√£o, inclus√£o)  
- [ ] Respostas est√£o coerentes e contextualizadas ao m√≥dulo  

## 5.2 Teste de alta carga (opcional)  
- [ ] 50+ consultas sem degrada√ß√£o  
- [ ] Lat√™ncia est√°vel  

## 5.3 Teste de precis√£o  
- [ ] Respostas n√£o cont√™m alucina√ß√µes  
- [ ] Conte√∫do remete claramente aos trechos recuperados  

---

# üì¶ 6. MIGRA√á√ÉO E FASE 9 (DESLIGAMENTO DO LEGADO)

## 6.1 Pr√©-requisitos atendidos  
- [ ] Todos os m√≥dulos t√™m fallback desligado com sucesso  
- [ ] Nenhuma consulta acionou fallback nos √∫ltimos 7 dias  
- [ ] Score m√©dio > 0.75  

## 6.2 Backup da base legado criado  
- [ ] Dump `.sql` presente em `/backups/rag_legacy/`  
- [ ] Arquivo acess√≠vel e √≠ntegro  

## 6.3 Base legado desativada logicamente  
- [ ] N√£o aparece mais no pipeline  
- [ ] N√£o √© usada em consultas  
- [ ] Ingest√£o bloqueada com erro claro  

---

# üß† 7. FASE 10 ‚Äì OTIMIZA√á√ïES AVAN√áADAS

## 7.1 Re-ranking Neural  
- [ ] Implementado  
- [ ] Logs mostram funcionamento  
- [ ] Reordena√ß√£o coerente  

## 7.2 Chunking inteligente (LLM-Assisted Chunking)  
- [ ] Divis√£o por sentido, n√£o por tamanho  
- [ ] PDFs com imagens geram chunks coerentes  
- [ ] Chunks armazenados corretamente na KB  

## 7.3 Data Augmentation  
- [ ] Resumo criado automaticamente  
- [ ] Gloss√°rio criado  
- [ ] FAQ gerada  
- [ ] Estes itens s√£o usados no RAG  

## 7.4 Auditoria de contexto  
- [ ] Respostas inseguras s√£o suavizadas  
- [ ] Auditor identifica extrapola√ß√µes  

---

# üìä 8. FASE 11 ‚Äì AUTO-APERFEI√áOAMENTO (SELF-IMPROVEMENT)

## 8.1 Tabela `rag_events` criada e registrando logs  
- [ ] Eventos aparecendo corretamente  
- [ ] Confian√ßa registrada  
- [ ] M√≥dulo registrado  

## 8.2 Sistema de feedback  
- [ ] Usu√°rio pode avaliar resposta  
- [ ] Feedback armazenado em `rag_feedback`  

## 8.3 Relat√≥rios autom√°ticos  
- [ ] `RAG_quality_report_*.md` gerado  
- [ ] Cont√©m estat√≠sticas por m√≥dulo  
- [ ] Destaca temas com baixa confian√ßa  

## 8.4 Gerador de sugest√µes  
- [ ] Arquivo `RAG_improvement_suggestions_*.md` gerado  
- [ ] Cont√©m recomenda√ß√µes de novos conte√∫dos  
- [ ] Sugere ajustes nos prompts  
- [ ] Sugere temas com lacunas  

---

# üö¶ 9. APROVA√á√ÉO FINAL

O RAG s√≥ pode ser considerado **conclu√≠do e est√°vel** se:

- [ ] Todas as valida√ß√µes acima foram marcadas como OK  
- [ ] Nenhuma regress√£o foi identificada  
- [ ] Todos os m√≥dulos est√£o operando 100% na KB segmentada  
- [ ] Auto-aprimoramento funcionando  
- [ ] Painel Super Admin atualizado  
- [ ] Backend est√°vel  
- [ ] Banco consistente  
- [ ] Nenhum fluxo do n8n foi impactado  

---

# üèÅ STATUS FINAL

- [ ] **RAG Est√°vel**  
- [ ] **RAG parcialmente est√°vel (ajustes necess√°rios)**  
- [ ] **RAG n√£o aprovado (regress√µes identificadas)**  