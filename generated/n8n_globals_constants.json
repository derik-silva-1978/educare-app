{
  "educare": {
    "api": {
      "base": {
        "env": "EDUCARE_API_URL",
        "fallback": "https://1d35ed6a-d635-41d2-8d11-7db8db84ce29-00-28ylqytrll200.picard.replit.dev"
      },
      "auth": {
        "type": "apiKey",
        "header": "x-api-key",
        "env": "EDUCARE_EXTERNAL_API_KEY"
      },
      "endpoints": {
        "users_check": {
          "label": "API: Verificar Usu√°rio",
          "method": "GET",
          "path": "/api/n8n/users/check",
          "url": "{{EDUCARE_API_URL}}/api/n8n/users/check",
          "functional_role": "Verifica se um usu√°rio existe na plataforma pelo n√∫mero de telefone. Retorna dados de assinatura ativa, nome do plano e informa√ß√µes b√°sicas do filho cadastrado.",
          "product_usage": "Valida√ß√£o inicial de acesso via WhatsApp, verifica√ß√£o de status de assinatura e encaminhamento para checkout de reativa√ß√£o quando necess√°rio.",
          "tags": ["users", "validation", "subscription", "whatsapp"],
          "auth": "apiKey",
          "headers_required": ["x-api-key"],
          "query_params": {
            "phone": {
              "type": "string",
              "required": true,
              "description": "N√∫mero de telefone do usu√°rio (aceita formatos: +5511999999999, 5511999999999, 11999999999)"
            }
          },
          "body_schema": null,
          "example_request": {
            "method": "GET",
            "url": "{{EDUCARE_API_URL}}/api/n8n/users/check?phone=5511999999999"
          },
          "example_response": {
            "exists": true,
            "user_id": "uuid-do-usuario",
            "user_name": "Maria Silva",
            "subscription_status": "active",
            "plan_name": "Plano Fam√≠lia",
            "child": {
              "id": "uuid-do-filho",
              "name": "Jo√£o Silva",
              "dob": "2024-01-15"
            }
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/n8nController.js"
          ]
        },
        "users_recognize": {
          "label": "API: Reconhecer Usu√°rio WhatsApp",
          "method": "POST",
          "path": "/api/n8n/users/recognize",
          "url": "{{EDUCARE_API_URL}}/api/n8n/users/recognize",
          "functional_role": "Reconhece um usu√°rio via WhatsApp, retornando contexto completo: dados do usu√°rio, status de assinatura, lista de filhos cadastrados, filho principal com idade em meses, e sauda√ß√£o personalizada para in√≠cio de conversa.",
          "product_usage": "In√≠cio de fluxo conversacional no WhatsApp, personaliza√ß√£o de mensagens com nome do usu√°rio e filho, contexto para IA contextual.",
          "tags": ["users", "whatsapp", "recognition", "context"],
          "auth": "apiKey",
          "headers_required": ["x-api-key", "Content-Type"],
          "query_params": null,
          "body_schema": {
            "phone": {
              "type": "string",
              "required": true,
              "description": "N√∫mero de telefone do usu√°rio"
            },
            "phone_number": {
              "type": "string",
              "required": false,
              "description": "Alias para phone (compatibilidade)"
            },
            "sender_name": {
              "type": "string",
              "required": false,
              "description": "Nome do remetente capturado do WhatsApp"
            }
          },
          "example_request": {
            "method": "POST",
            "url": "{{EDUCARE_API_URL}}/api/n8n/users/recognize",
            "body": {
              "phone": "5511999999999",
              "sender_name": "Maria"
            }
          },
          "example_response": {
            "recognized": true,
            "user": {
              "id": "uuid-do-usuario",
              "name": "Maria Silva",
              "role": "parent"
            },
            "subscription": {
              "active": true,
              "status": "active",
              "plan_name": "Plano Fam√≠lia"
            },
            "children": [
              {
                "id": "uuid-do-filho",
                "name": "Jo√£o",
                "is_primary": true
              }
            ],
            "primary_child": {
              "id": "uuid-do-filho",
              "name": "Jo√£o",
              "age_months": 8,
              "gender": "male"
            },
            "basic_context": {
              "name": "Jo√£o",
              "age_months": 8,
              "gender": "male"
            },
            "greeting": "Ol√° Maria! Estou aqui para ajudar com o desenvolvimento de Jo√£o."
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/n8nController.js"
          ]
        },
        "rag_titinauta_ask": {
          "label": "API: RAG TitiNauta",
          "method": "POST",
          "path": "/api/n8n/rag/ask",
          "url": "{{EDUCARE_API_URL}}/api/n8n/rag/ask",
          "functional_role": "Endpoint de Intelig√™ncia Artificial contextual (RAG) que responde perguntas livres usando base de conhecimento cient√≠fico (OMS, BNCC, manuais) e contexto do filho. Suporta tr√™s knowledge bases: kb_baby (desenvolvimento infantil), kb_mother (sa√∫de materna), kb_professional (protocolos cl√≠nicos).",
          "product_usage": "Chat inteligente TitiNauta, suporte cont√≠nuo ao cuidador, respostas personalizadas baseadas na idade e contexto do beb√™, jornada da m√£e e suporte a profissionais.",
          "tags": ["ai", "rag", "support", "titinauta", "knowledge"],
          "auth": "apiKey",
          "headers_required": ["x-api-key", "Content-Type"],
          "query_params": null,
          "body_schema": {
            "question": {
              "type": "string",
              "required": true,
              "description": "Pergunta do usu√°rio em linguagem natural"
            },
            "context": {
              "type": "object",
              "required": false,
              "description": "Contexto adicional para a pergunta",
              "properties": {
                "child_id": {
                  "type": "string",
                  "description": "UUID do filho para contexto personalizado"
                },
                "week": {
                  "type": "integer",
                  "description": "Semana de desenvolvimento do beb√™"
                }
              }
            }
          },
          "example_request": {
            "method": "POST",
            "url": "{{EDUCARE_API_URL}}/api/n8n/rag/ask",
            "body": {
              "question": "Meu beb√™ de 6 meses pode comer banana?",
              "context": {
                "child_id": "uuid-do-filho",
                "week": 26
              }
            }
          },
          "example_response": {
            "response_text": "Sim! A partir dos 6 meses, com a introdu√ß√£o alimentar, a banana √© uma excelente op√ß√£o. Ela √© rica em pot√°ssio e f√°cil de amassar. Comece oferecendo pequenas por√ß√µes amassadas ou em peda√ßos grandes no m√©todo BLW.",
            "media_type": "text",
            "media_url": null,
            "metadata": {
              "processing_time_ms": 1250,
              "documents_found": 3,
              "file_search_used": true
            }
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/ragController.js",
            "educare-backend/src/services/ragService.js"
          ]
        },
        "biometrics_update": {
          "label": "API: Registrar Biometria",
          "method": "POST",
          "path": "/api/n8n/biometrics/update",
          "url": "{{EDUCARE_API_URL}}/api/n8n/biometrics/update",
          "functional_role": "Registra dados biom√©tricos da crian√ßa (peso, altura, per√≠metro cef√°lico) a partir de texto livre. Utiliza NLP para extrair valores num√©ricos da mensagem do usu√°rio.",
          "product_usage": "Acompanhamento de crescimento infantil via WhatsApp, hist√≥rico de sa√∫de do beb√™, base para alertas de desenvolvimento e gera√ß√£o de curvas de crescimento.",
          "tags": ["health", "biometrics", "growth", "baby"],
          "auth": "apiKey",
          "headers_required": ["x-api-key", "Content-Type"],
          "query_params": null,
          "body_schema": {
            "child_id": {
              "type": "string",
              "required": true,
              "description": "UUID da crian√ßa"
            },
            "raw_text": {
              "type": "string",
              "required": true,
              "description": "Texto livre com dados biom√©tricos (ex: 'Peso 8.5kg altura 72cm')"
            }
          },
          "example_request": {
            "method": "POST",
            "url": "{{EDUCARE_API_URL}}/api/n8n/biometrics/update",
            "body": {
              "child_id": "uuid-do-filho",
              "raw_text": "Hoje o Jo√£o pesou 8.5kg e est√° medindo 72cm"
            }
          },
          "example_response": {
            "response_text": "‚úÖ Registrado para Jo√£o: peso: 8.5kg, altura: 72cm. Continue acompanhando o desenvolvimento!",
            "media_type": "text",
            "media_url": null,
            "data": {
              "id": "uuid-do-registro",
              "weight": 8.5,
              "height": 72,
              "head_circumference": null
            }
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/n8nController.js",
            "educare-backend/src/services/nlpParserService.js"
          ]
        },
        "sleep_log": {
          "label": "API: Registrar Sono",
          "method": "POST",
          "path": "/api/n8n/sleep/log",
          "url": "{{EDUCARE_API_URL}}/api/n8n/sleep/log",
          "functional_role": "Registra informa√ß√µes sobre o sono da crian√ßa (hor√°rio de in√≠cio, fim, dura√ß√£o, tipo e qualidade) a partir de texto livre. Utiliza NLP para extrair hor√°rios e dura√ß√£o.",
          "product_usage": "An√°lise de h√°bitos de sono do beb√™, orienta√ß√£o aos cuidadores sobre rotina, dados para sa√∫de do beb√™ e identifica√ß√£o de padr√µes.",
          "tags": ["health", "sleep", "routine", "baby"],
          "auth": "apiKey",
          "headers_required": ["x-api-key", "Content-Type"],
          "query_params": null,
          "body_schema": {
            "child_id": {
              "type": "string",
              "required": true,
              "description": "UUID da crian√ßa"
            },
            "raw_text": {
              "type": "string",
              "required": true,
              "description": "Texto livre descrevendo o sono (ex: 'Dormiu das 20h √†s 6h')"
            }
          },
          "example_request": {
            "method": "POST",
            "url": "{{EDUCARE_API_URL}}/api/n8n/sleep/log",
            "body": {
              "child_id": "uuid-do-filho",
              "raw_text": "O Jo√£o dormiu das 20:30 at√© 6:00 da manh√£"
            }
          },
          "example_response": {
            "response_text": "üò¥ Sono registrado para Jo√£o: in√≠cio: 20:30, fim: 06:00, tipo: noturno. Bons sonhos!",
            "media_type": "text",
            "media_url": null,
            "data": {
              "id": "uuid-do-registro",
              "start_time": "20:30",
              "end_time": "06:00",
              "duration_minutes": 570,
              "sleep_type": "night",
              "quality": null
            }
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/n8nController.js",
            "educare-backend/src/services/nlpParserService.js"
          ]
        },
        "appointments_create": {
          "label": "API: Agendar Consulta",
          "method": "POST",
          "path": "/api/n8n/appointments/create",
          "url": "{{EDUCARE_API_URL}}/api/n8n/appointments/create",
          "functional_role": "Cria agendamento de consultas m√©dicas ou compromissos relacionados √† crian√ßa (pediatra, vacinas, terapias) a partir de texto livre. Extrai m√©dico, especialidade, data, hor√°rio e local.",
          "product_usage": "Gest√£o de agenda da crian√ßa, organiza√ß√£o familiar, base para automa√ß√µes de lembretes e notifica√ß√µes.",
          "tags": ["schedule", "appointments", "health", "reminders"],
          "auth": "apiKey",
          "headers_required": ["x-api-key", "Content-Type"],
          "query_params": null,
          "body_schema": {
            "child_id": {
              "type": "string",
              "required": true,
              "description": "UUID da crian√ßa"
            },
            "raw_text": {
              "type": "string",
              "required": true,
              "description": "Texto livre descrevendo a consulta (ex: 'Pediatra dia 15/02 √†s 14h')"
            }
          },
          "example_request": {
            "method": "POST",
            "url": "{{EDUCARE_API_URL}}/api/n8n/appointments/create",
            "body": {
              "child_id": "uuid-do-filho",
              "raw_text": "Consulta com Dr. Carlos pediatra dia 15/02 √†s 14:00 no Hospital Santa Maria"
            }
          },
          "example_response": {
            "response_text": "üè• Consulta agendada para Jo√£o: Pediatra com Dr. Carlos em 15/02/2025 √†s 14:00 no(a) Hospital Santa Maria. Vou te lembrar!",
            "media_type": "text",
            "media_url": null,
            "data": {
              "id": "uuid-do-agendamento",
              "doctor_name": "Dr. Carlos",
              "specialty": "Pediatra",
              "appointment_date": "2025-02-15",
              "appointment_time": "14:00",
              "location": "Hospital Santa Maria"
            }
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/n8nController.js",
            "educare-backend/src/services/nlpParserService.js"
          ]
        },
        "vaccines_check": {
          "label": "API: Verificar Vacinas",
          "method": "GET",
          "path": "/api/n8n/vaccines/check",
          "url": "{{EDUCARE_API_URL}}/api/n8n/vaccines/check",
          "functional_role": "Verifica a situa√ß√£o vacinal da crian√ßa com base na idade em semanas e no calend√°rio oficial da Sociedade Brasileira de Pediatria (SBP). Retorna vacinas pendentes, em dia e pr√≥ximas doses.",
          "product_usage": "Sa√∫de do Beb√™, preven√ß√£o, alertas de vacinas atrasadas, lembrete de pr√≥ximas doses, acompanhamento do calend√°rio vacinal.",
          "tags": ["health", "vaccines", "prevention", "calendar"],
          "auth": "apiKey",
          "headers_required": ["x-api-key"],
          "query_params": {
            "age_weeks": {
              "type": "integer",
              "required": true,
              "description": "Idade da crian√ßa em semanas"
            },
            "child_id": {
              "type": "string",
              "required": false,
              "description": "UUID da crian√ßa para verificar hist√≥rico de vacinas tomadas"
            }
          },
          "body_schema": null,
          "example_request": {
            "method": "GET",
            "url": "{{EDUCARE_API_URL}}/api/n8n/vaccines/check?age_weeks=16&child_id=uuid-do-filho"
          },
          "example_response": {
            "response_text": "üíâ **Calend√°rio Vacinal - 16 semanas**\n\n‚úÖ Todas as vacinas em dia at√© 16 semanas!\n\nüìÖ **Pr√≥ximas vacinas:**\n‚Ä¢ Meningoc√≥cica C (dose 2) - √†s 20 semanas\n‚Ä¢ Pentavalente (dose 3) - √†s 24 semanas",
            "media_type": "text",
            "media_url": null,
            "data": {
              "age_weeks": 16,
              "pending_count": 0,
              "pending_vaccines": [],
              "upcoming_vaccines": [
                {"vaccine": "Meningoc√≥cica C", "weeks": 20, "dose": 2},
                {"vaccine": "Pentavalente (DTP+Hib+HB)", "weeks": 24, "dose": 3}
              ],
              "taken_count": 8
            }
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/n8nController.js"
          ]
        },
        "content_child": {
          "label": "API: Conte√∫do Jornada da Crian√ßa",
          "method": "GET",
          "path": "/api/n8n/content/child",
          "url": "{{EDUCARE_API_URL}}/api/n8n/content/child",
          "functional_role": "Fornece conte√∫do educacional estruturado sobre desenvolvimento infantil, marcos de desenvolvimento, est√≠mulos e orienta√ß√µes conforme a idade ou fase da crian√ßa.",
          "product_usage": "Jornada da Crian√ßa, menus educativos, respostas guiadas, engajamento de pais com conte√∫do relevante para a fase do beb√™.",
          "tags": ["content", "education", "development", "child"],
          "auth": "apiKey",
          "headers_required": ["x-api-key"],
          "query_params": {
            "week": {
              "type": "integer",
              "required": false,
              "description": "Semana de desenvolvimento do beb√™ para filtrar conte√∫do"
            }
          },
          "body_schema": null,
          "example_request": {
            "method": "GET",
            "url": "{{EDUCARE_API_URL}}/api/n8n/content/child?week=26"
          },
          "example_response": {
            "response_text": "üë∂ **Conte√∫do para semana 26:**\n\n1. **Introdu√ß√£o Alimentar: Guia Completo**\nTudo sobre como iniciar a alimenta√ß√£o do seu beb√™...\n\n2. **Marcos do 6¬∫ m√™s**\nO que esperar do desenvolvimento...",
            "media_type": "text",
            "media_url": null,
            "data": [
              {"id": "uuid-conteudo-1", "title": "Introdu√ß√£o Alimentar: Guia Completo", "type": "news"},
              {"id": "uuid-conteudo-2", "title": "Marcos do 6¬∫ m√™s", "type": "training"}
            ]
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/n8nController.js"
          ]
        },
        "content_mother": {
          "label": "API: Conte√∫do Jornada da M√£e",
          "method": "GET",
          "path": "/api/n8n/content/mother",
          "url": "{{EDUCARE_API_URL}}/api/n8n/content/mother",
          "functional_role": "Entrega conte√∫do de apoio emocional, informativo e pr√°tico para m√£es e cuidadoras, incluindo temas de p√≥s-parto, autocuidado, sa√∫de mental, amamenta√ß√£o e bem-estar.",
          "product_usage": "Jornada da M√£e, acolhimento emocional, reten√ß√£o de usu√°rias, suporte cont√≠nuo √†s m√£es no per√≠odo p√≥s-parto.",
          "tags": ["content", "mother", "wellness", "postpartum"],
          "auth": "apiKey",
          "headers_required": ["x-api-key"],
          "query_params": {
            "week": {
              "type": "integer",
              "required": false,
              "description": "Semana p√≥s-parto para filtrar conte√∫do relevante"
            }
          },
          "body_schema": null,
          "example_request": {
            "method": "GET",
            "url": "{{EDUCARE_API_URL}}/api/n8n/content/mother?week=8"
          },
          "example_response": {
            "response_text": "üë© **Conte√∫do para m√£es - semana 8:**\n\n1. **Autocuidado no Puerp√©rio**\nDicas essenciais para cuidar de voc√™...\n\n2. **Voltando √† Rotina**\nComo equilibrar maternidade e vida pessoal...",
            "media_type": "text",
            "media_url": null,
            "data": [
              {"id": "uuid-conteudo-1", "title": "Autocuidado no Puerp√©rio", "type": "news"},
              {"id": "uuid-conteudo-2", "title": "Voltando √† Rotina", "type": "training"}
            ]
          },
          "source_files": [
            "educare-backend/src/routes/n8nRoutes.js",
            "educare-backend/src/controllers/n8nController.js"
          ]
        }
      }
    }
  }
}
