# ============================================
# Educare+ — Environment Variables Template
# ============================================
# Copy this file to .env and fill in your values.
# DO NOT commit .env to version control.
# ============================================

# ─── Server ──────────────────────────────────
NODE_ENV=production
PORT=5000
FRONTEND_PORT=80

# ─── Database (PostgreSQL) ───────────────────
DB_USERNAME=your_db_user
DB_PASSWORD=your_db_password
DB_DATABASE=educareapp
DB_HOST=your_db_host_or_ip
DB_PORT=5432
DB_DIALECT=postgres
DB_TIMEZONE=America/Sao_Paulo
DB_SYNC_ENABLED=false

# ─── Authentication (JWT) ───────────────────
JWT_SECRET=CHANGE_THIS_TO_A_STRONG_RANDOM_STRING
JWT_EXPIRATION=24h

# ─── Frontend URL ───────────────────────────
# Used for CORS and email/WhatsApp links
FRONTEND_URL=https://your-domain.com
BACKEND_URL=https://your-domain.com
APP_URL=https://your-domain.com

# Build-time variable for the frontend container
VITE_API_URL=https://your-domain.com

# ─── CORS ────────────────────────────────────
# Comma-separated list of allowed origins
CORS_ORIGINS=https://your-domain.com

# ─── OpenAI ─────────────────────────────────
OPENAI_API_KEY=sk-your-openai-api-key

# ─── Google Gemini ──────────────────────────
GEMINI_API_KEY=your-gemini-api-key
ENABLE_GEMINI_RAG=true

# ─── Qdrant (Vector Database) ──────────────
QDRANT_URL=https://your-qdrant-cluster.cloud.qdrant.io
QDRANT_API_KEY=your-qdrant-api-key
ENABLE_QDRANT_RAG=true

# ─── Stripe (Payments) ─────────────────────
STRIPE_SECRET_KEY=sk_live_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# ─── WhatsApp (Evolution API) ──────────────
EVOLUTION_API_URL=https://your-evolution-api.com
EVOLUTION_API_KEY=your-evolution-api-key
EVOLUTION_INSTANCE_NAME=your-instance-name

# ─── n8n Webhooks ──────────────────────────
PHONE_VERIFICATION_WEBHOOK=https://your-n8n.com/webhook/phone-verify
PHONE_PASSWORD_WEBHOOK=https://your-n8n.com/webhook/phone-password
EMAIL_WEBHOOK=https://your-n8n.com/webhook/email
ESCALATION_WEBHOOK_URL=https://your-n8n.com/webhook/escalation
N8N_API_KEY=your-n8n-api-key
N8N_REST_API_KEY=your-n8n-rest-api-key

# ─── External API ──────────────────────────
EXTERNAL_API_KEY=your-external-api-key
API_BASE_URL=https://your-api-base-url.com
API_VERSION=v1

# ─── Owner Config ──────────────────────────
OWNER_PHONE=5511999999999

# ─── File Storage ──────────────────────────
UPLOAD_PATH=./uploads
KNOWLEDGE_UPLOAD_PATH=./knowledge_base
BACKUP_PATH=./backups

# ─── Vimeo (Training Videos) ──────────────
VIMEO_ACCESS_TOKEN=your-vimeo-access-token

# ─── RAG Configuration ─────────────────────
RAG_PRIMARY_PROVIDER=openai
ENABLE_SEGMENTED_KB=true
KB_FALLBACK_ENABLED=false
USE_LEGACY_FALLBACK_FOR_BABY=false
USE_LEGACY_FALLBACK_FOR_MOTHER=false
USE_LEGACY_FALLBACK_FOR_PROFESSIONAL=false
KB_LOG_SELECTIONS=true
KB_VERSIONING_ENABLED=true
LEGACY_INGESTION_DISABLED=true

# ─── RAG: Re-ranking ──────────────────────
RERANKING_ENABLED=true
RERANKING_MODEL=gpt-4o-mini
RERANKING_MAX_CANDIDATES=20
RERANKING_TOP_K=5

# ─── RAG: Confidence Thresholds ───────────
CONFIDENCE_HIGH_THRESHOLD=0.80
CONFIDENCE_MEDIUM_THRESHOLD=0.50
CONFIDENCE_LOW_THRESHOLD=0.30
MIN_DOCS_HIGH_CONFIDENCE=3

# ─── RAG: Chunking ────────────────────────
CHUNKING_ENABLED=true
CHUNKING_LLM_ASSISTED=true
MIN_CHUNK_SIZE=250
MAX_CHUNK_SIZE=1200
CHUNK_OVERLAP_SIZE=100

# ─── RAG: Augmentation ────────────────────
AUGMENTATION_ENABLED=true
AUGMENTATION_MODEL=gpt-4o-mini

# ─── RAG: Safety ──────────────────────────
CONTEXT_SAFETY_ENABLED=true
BLOCK_UNSAFE_CONTENT=false
LOG_SAFETY_EVENTS=true

# ─── RAG: Feedback & Auto-Improvement ────
RAG_FEEDBACK_ENABLED=true
RAG_AUTO_ANALYSIS=true
RAG_IMPROVEMENT_MODEL=gpt-4o-mini
RAG_STORE_MAX_SIZE=10000
RAG_USE_DB_PERSISTENCE=true
REQUIRE_HUMAN_BELOW=0.30

# ─── RAG: Guardrails ─────────────────────
GUARDRAILS_STRICT_MODE=false
LOG_GUARDRAILS_EVENTS=true

# ─── Logging ─────────────────────────────
LOG_LEVEL=info
